{"version":3,"sources":["../../bin/app.js"],"names":["http","require","fs","template","url","comments","name","message","dateTime","createServer","req","res","pathObj","parse","pathName","pathname","readFile","error","data","end","htmlStr","render","toString","indexOf","err","console","log","comment","query","push","statusCode","setHeader","listen"],"mappings":";;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,KAAKD,QAAQ,IAAR,CAAT;AACA,IAAIE,WAAWF,QAAQ,cAAR,CAAf;AACA,IAAIG,MAAMH,QAAQ,KAAR,CAAV;;AAEA,IAAII,WAAW,CACX;AACIC,UAAK,KADT;AAEIC,aAAQ,KAFZ;AAGIC,cAAS;AAHb,CADW,EAMX;AACIF,UAAK,MADT;AAEIC,aAAQ,KAFZ;AAGIC,cAAS;AAHb,CANW,EAWX;AACIF,UAAK,MADT;AAEIC,aAAQ,KAFZ;AAGIC,cAAS;AAHb,CAXW,EAgBX;AACIF,UAAK,MADT;AAEIC,aAAQ,KAFZ;AAGIC,cAAS;AAHb,CAhBW,CAAf;;AAuBAR,KAAKS,YAAL,CAAkB,UAAUC,GAAV,EAAcC,GAAd,EAAmB;AACjC;AACA;AACA;AACA,QAAIC,UAAUR,IAAIS,KAAJ,CAAUH,IAAIN,GAAd,EAAkB,IAAlB,CAAd;AACA,QAAIU,WAAWF,QAAQG,QAAvB;AACA;AACA,QAAID,aAAa,GAAjB,EAAqB;AACjBZ,WAAGc,QAAH,CAAY,qBAAZ,EAAkC,UAAUC,KAAV,EAAgBC,IAAhB,EAAsB;AACpD,gBAAID,KAAJ,EAAU;AACN,uBAAON,IAAIQ,GAAJ,CAAQ,WAAR,CAAP;AACH;AACD,gBAAIC,UAAUjB,SAASkB,MAAT,CAAgBH,KAAKI,QAAL,EAAhB,EAAgC;AAC1CjB,0BAASA;AADiC,aAAhC,CAAd;AAGAM,gBAAIQ,GAAJ,CAAQC,OAAR;AACH,SARD;AASH,KAVD,MAUM,IAAIN,SAASS,OAAT,CAAiB,UAAjB,MAAgC,CAApC,EAAuC;AACzCrB,WAAGc,QAAH,CAAY,OAAKF,QAAjB,EAA0B,UAAUU,GAAV,EAAcN,IAAd,EAAoB;AAC1C,gBAAIM,GAAJ,EAAQ;AACJ,uBAAOb,IAAIQ,GAAJ,CAAQ,SAAR,CAAP;AACH;AACDR,gBAAIQ,GAAJ,CAAQD,IAAR;AACH,SALD;AAMAO,gBAAQC,GAAR,CAAYZ,QAAZ;AACH,KARK,MAQA,IAAGA,aAAW,OAAd,EAAsB;AACxBZ,WAAGc,QAAH,CAAY,oBAAZ,EAAiC,UAAUC,KAAV,EAAgBC,IAAhB,EAAsB;AACnD,gBAAID,KAAJ,EAAU;AACN,uBAAON,IAAIQ,GAAJ,CAAQ,UAAR,CAAP;AACH;AACDR,gBAAIQ,GAAJ,CAAQD,IAAR;AACH,SALD;AAMH,KAPK,MAOC,IAAIJ,aAAW,UAAf,EAA2B;AAC/B;AACC,YAAIa,UAAUf,QAAQgB,KAAtB;AACAD,gBAAQnB,QAAR,GAAmB,oBAAnB;AACAH,iBAASwB,IAAT,CAAcF,OAAd;AACA;AACA;AACAhB,YAAImB,UAAJ,GAAiB,GAAjB;AACAnB,YAAIoB,SAAJ,CAAc,UAAd,EAAyB,GAAzB;AACApB,YAAIQ,GAAJ;AACH,KAVM,MAUA;AACHjB,WAAGc,QAAH,CAAY,mBAAZ,EAAgC,UAAUQ,GAAV,EAAcN,IAAd,EAAoB;AAChD,gBAAIM,GAAJ,EAAQ;AACJ,uBAAOb,IAAIQ,GAAJ,CAAQ,aAAR,CAAP;AACH;AACDR,gBAAIQ,GAAJ,CAAQD,IAAR;AAEH,SAND;AAOH;AACJ,CAnDD,EAmDGc,MAnDH,CAmDU,IAnDV,EAmDe,YAAY;AACvBP,YAAQC,GAAR,CAAY,iBAAZ;AACH,CArDD","file":"app.js","sourcesContent":["var http = require('http');\r\nvar fs = require('fs');\r\nvar template = require('art-template');\r\nvar url = require('url');\r\n\r\nvar comments = [\r\n    {\r\n        name:'新开普',\r\n        message:'杠杠的',\r\n        dateTime:'2019年3月15日'\r\n    },\r\n    {\r\n        name:'北京迪克',\r\n        message:'杠杠的',\r\n        dateTime:'2019年3月15日'\r\n    },\r\n    {\r\n        name:'上海树维',\r\n        message:'杠杠的',\r\n        dateTime:'2019年3月15日'\r\n    },\r\n    {\r\n        name:'智慧燃气',\r\n        message:'杠杠的',\r\n        dateTime:'2019年3月15日'\r\n    }\r\n]\r\n\r\nhttp.createServer(function (req,res) {\r\n    //res.end('hello')\r\n    //var url = req.url;\r\n    //解析路径\r\n    var pathObj = url.parse(req.url,true);\r\n    var pathName = pathObj.pathname;\r\n    //console.log(pathObj)\r\n    if (pathName === '/'){\r\n        fs.readFile('../views/words.html',function (error,data) {\r\n            if (error){\r\n                return res.end('words-404');\r\n            }\r\n            var htmlStr = template.render(data.toString(),{\r\n                comments:comments\r\n            })\r\n            res.end(htmlStr);\r\n        })\r\n    }else if (pathName.indexOf('/public/')=== 0 ){\r\n        fs.readFile('..'+pathName,function (err,data) {\r\n            if (err){\r\n                return res.end('css-404')\r\n            }\r\n            res.end(data)\r\n        })\r\n        console.log(pathName);\r\n    }else if(pathName==='/post'){\r\n        fs.readFile('../views/post.html',function (error,data) {\r\n            if (error){\r\n                return res.end('post-404')\r\n            }\r\n            res.end(data)\r\n        })\r\n    } else if (pathName==='/pinglun') {\r\n       //res.end(JSON.stringify(pathObj.query));\r\n        var comment = pathObj.query;\r\n        comment.dateTime = '2019年3月18日09:12:05';\r\n        comments.push(comment);\r\n        //开始处理重定向\r\n        //状态码设置为302，通过location进行跳转\r\n        res.statusCode = 302;\r\n        res.setHeader('location','/');\r\n        res.end();\r\n    } else {\r\n        fs.readFile('../views/404.html',function (err,data) {\r\n            if (err){\r\n                return res.end('404-找不不到页面！');\r\n            }\r\n            res.end(data);\r\n\r\n        });\r\n    }\r\n}).listen(3002,function () {\r\n    console.log('server start...')\r\n});"]}